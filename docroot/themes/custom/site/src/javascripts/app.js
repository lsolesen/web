// Document ready
(function ($) {
  'use strict';

  // Enable layout
  layout.init();

  //Modal PopUp
  modalPopUp.init();

  $("#toggle_mobile_menu").click(function (event) {
    $('#main-menu').toggleClass('mobile-menu-open');
    $('.layout__document').toggleClass('mobile-menu-open');
  })

//Show search form block
  $(".search-button").click(function (event) {
    if ($("#search-form-popover").hasClass("hidden")) {
      $("#search-form-popover").removeClass('hidden');
      $(".form-control").focus();
    }
  });

//Hide search form block
  $(document).click(function (event) {
    if (!$(event.target).closest('#search-form-popover').length && !$(event.target).closest('.search-button').length) {
      if (!$("#search-form-popover").hasClass("hidden")) {
        $("#search-form-popover").addClass('hidden');
      }
    }
  });

  //Improving usability for menudropdowns for mobile devices
  if (!!('ontouchstart' in window)) {//check for touch device
    $('li.dropdown.layout-navigation__dropdown').find('> a').click(function (e) {
      if ($(this).parent().hasClass("expanded")) {
        //$(this).parent().removeClass("expanded");
      }
      else {
        e.preventDefault();
        $(this).parent().addClass("expanded");
      }
    });
  }
  else {//keeping it compatible with desktop devices
    $('li.dropdown.layout-navigation__dropdown').hover(
        function (e) {
          $(this).addClass("expanded");
        }, function (e) {
          $(this).removeClass("expanded");
        }
    );
  }

})(jQuery);
